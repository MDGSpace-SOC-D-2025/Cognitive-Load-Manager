<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h3> STUDY/WORK SESSION</h3>
<div id="timer"> 00:00:00</div>
<button onclick="startSession()"> START</button>
<button onclick="stopSession()"> STOP</button>


<script>
let startTime=null;
let timeInterval=null;

function startSession(){
  fetch("/start_session", {method:"POST"});

  startTime= new Date();
  timerInterval= setInterval(updateTimer, 1000);
  // timer ticks off every 1000ms=1sec

}

function stopSession() {
    fetch("/stop_session", { method: "POST" });

    clearInterval(timerInterval);
    timerInterval = null;
}

function updateTimer() {
    const now = new Date();
    const diff = Math.floor((now - startTime) / 1000);

    const hours = String(Math.floor(diff / 3600)).padStart(2, "0");
    const minutes = String(Math.floor((diff % 3600) / 60)).padStart(2, "0");
    const seconds = String(diff % 60).padStart(2, "0");

    document.getElementById("timer").innerText =
        `${hours}:${minutes}:${seconds}`;
}


</script>

<h3>Total Study Time</h3>
<p>{{ total_study_hours | round(2) }} hours</p>
</body>
</html>